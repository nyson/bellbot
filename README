most of this is inspired/blatantly copied from http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/